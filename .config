# ==========================================
# --- 目标硬件: X86/64 & 研凌 N3061 (PVE) ---
# ==========================================
CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y

# --- PVE 引导修复: EFI 模式 ---
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_GRUB_IMAGES=y
CONFIG_GRUB_EFI_IMAGES=y
CONFIG_GRUB_TITLE="ImmortalWrt-N3061"
CONFIG_GRUB_TIMEOUT="0"

# --- 存储空间 ---
CONFIG_TARGET_KERNEL_PARTSIZE=64
CONFIG_TARGET_ROOTFS_PARTSIZE=1024
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y

# ==========================================
# --- 核心系统 & 界面 (必选) ---
# ==========================================
# 确保 Web 界面 (LuCI) 和 Web 服务器 (uhttpd) 存在
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-main=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_uhttpd=y
CONFIG_PACKAGE_uhttpd-mod-ubus=y
CONFIG_PACKAGE_luci-i18n-base-zh-cn=y

# --- 界面美化: Argon ---
CONFIG_PACKAGE_luci-theme-argon=y
CONFIG_PACKAGE_luci-app-argon-config=y
CONFIG_PACKAGE_luci-i18n-argon-config-zh-cn=y

# ==========================================
# --- 5G / 网络 / 代理 ---
# ==========================================
# 1. 代理软件: HomeProxy (Sing-box 内核)
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_luci-i18n-homeproxy-zh-cn=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-fullcone=y

# 2. 5G 模块支持 (QModem + 驱动)
CONFIG_PACKAGE_luci-app-qmodem=y
CONFIG_PACKAGE_luci-i18n-qmodem-zh-cn=y
CONFIG_PACKAGE_luci-app-sms-tool=y
CONFIG_PACKAGE_luci-i18n-sms-tool-zh-cn=y
CONFIG_PACKAGE_modemmanager=y
# 核心驱动 (适配 RM500Q 等)
CONFIG_PACKAGE_kmod-usb-net-cdc-mbim=y
CONFIG_PACKAGE_libmbim=y
CONFIG_PACKAGE_umbim=y
CONFIG_PACKAGE_luci-proto-qmi=y
CONFIG_PACKAGE_uqmi=y
CONFIG_PACKAGE_comgt=y
CONFIG_PACKAGE_kmod-usb-serial=y
CONFIG_PACKAGE_kmod-usb-serial-option=y
CONFIG_PACKAGE_kmod-usb-serial-wwan=y
CONFIG_PACKAGE_usbutils=y

# 3. 负载均衡 (MWAN3)
CONFIG_PACKAGE_luci-app-mwan3=y
CONFIG_PACKAGE_luci-i18n-mwan3-zh-cn=y
CONFIG_PACKAGE_mwan3=y

# ==========================================
# --- Wi-Fi 驱动 & 热点管理 ---
# ==========================================
# 硬件驱动: MT7922 (推荐开热点) & AX210
CONFIG_PACKAGE_kmod-mt7921e=y
CONFIG_PACKAGE_kmod-mt7921-firmware=y
CONFIG_PACKAGE_linux-firmware-mediatek=y
CONFIG_PACKAGE_kmod-iwlwifi=y
CONFIG_PACKAGE_iwlwifi-firmware-ax210=y
CONFIG_PACKAGE_hostapd-common=y
CONFIG_PACKAGE_wpad-mesh-openssl=y
CONFIG_PACKAGE_iw=y

# 软件界面: 访客网络 & 定时开关
CONFIG_PACKAGE_luci-app-guest-wifi=y
CONFIG_PACKAGE_luci-i18n-guest-wifi-zh-cn=y
CONFIG_PACKAGE_luci-app-wifischedule=y
CONFIG_PACKAGE_luci-i18n-wifischedule-zh-cn=y

# ==========================================
# --- 虚拟化 & 系统底层 ---
# ==========================================
# PVE 虚拟机增强
CONFIG_PACKAGE_qemu-ga=y
CONFIG_PACKAGE_kmod-virtio-net=y
CONFIG_PACKAGE_kmod-virtio-balloon=y
CONFIG_PACKAGE_kmod-virtio-console=y
CONFIG_PACKAGE_kmod-virtio-scsi=y
CONFIG_PACKAGE_kmod-scsi-core=y

# 基础工具: 磁盘管理/终端/SSL/解压
CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_luci-i18n-diskman-zh-cn=y
CONFIG_PACKAGE_parted=y
CONFIG_PACKAGE_smartmontools=y
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-i18n-ttyd-zh-cn=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_unzip=y
CONFIG_PACKAGE_gzip=y
CONFIG_PACKAGE_tar=y

# 核心包管理器 OPKG (必备)
CONFIG_PACKAGE_opkg=y
CONFIG_PACKAGE_ca-bundle=y
CONFIG_PACKAGE_ca-certificates=y
CONFIG_PACKAGE_libustream-openssl=y
CONFIG_PACKAGE_openssl-util=y

# ==========================================
# --- 扩展插件 (用户指定) ---
# ==========================================
# 1. 强力去广告: AdGuard Home
CONFIG_PACKAGE_luci-app-adguardhome=y
CONFIG_PACKAGE_luci-i18n-adguardhome-zh-cn=y

# 2. 异地组网: Tailscale (支持 Google 登录)
CONFIG_PACKAGE_tailscale=y
CONFIG_PACKAGE_luci-app-tailscale=y
CONFIG_PACKAGE_luci-i18n-tailscale-zh-cn=y
CONFIG_PACKAGE_iptables-mod-nat-extra=y
