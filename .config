# --- 目标硬件: X86/64 & 研凌 N3061 (PVE 虚拟机专用) ---
CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y

# --- 核心修复: 开启 EFI 启动模式 ---
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_GRUB_IMAGES=y
CONFIG_GRUB_EFI_IMAGES=y
CONFIG_GRUB_TITLE="ImmortalWrt-N3061"
CONFIG_GRUB_TIMEOUT="0"

# --- 存储优化: 1024M 根分区 ---
CONFIG_TARGET_KERNEL_PARTSIZE=64
CONFIG_TARGET_ROOTFS_PARTSIZE=1024
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y

# --- 1. 代理软件: HomeProxy ---
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-fullcone=y

# --- 2. 5G 模块增强: RM500Q & MBIM 专项优化 ---
CONFIG_PACKAGE_luci-app-qmodem=y
CONFIG_PACKAGE_luci-app-sms-tool=y
# MBIM 模式核心依赖
CONFIG_PACKAGE_kmod-usb-net-cdc-mbim=y
CONFIG_PACKAGE_libmbim=y
CONFIG_PACKAGE_umbim=y
# 传统协议备份 (QMI/NCM)
CONFIG_PACKAGE_luci-proto-qmi=y
CONFIG_PACKAGE_uqmi=y
CONFIG_PACKAGE_comgt=y
CONFIG_PACKAGE_kmod-usb-serial=y
CONFIG_PACKAGE_kmod-usb-serial-option=y
CONFIG_PACKAGE_kmod-usb-serial-wwan=y

# --- 3. 多线自动切换: MWAN3 (WAN口与5G互相帮助) ---
CONFIG_PACKAGE_luci-app-mwan3=y
CONFIG_PACKAGE_mwan3=y

# --- 4. 无线驱动: MT7922 & AX210 ---
CONFIG_PACKAGE_kmod-mt7921e=y
CONFIG_PACKAGE_kmod-mt7921-firmware=y
CONFIG_PACKAGE_linux-firmware-mediatek=y
CONFIG_PACKAGE_kmod-iwlwifi=y
CONFIG_PACKAGE_iwlwifi-firmware-ax210=y
CONFIG_PACKAGE_iwlwifi-firmware-ty-a0=y
CONFIG_PACKAGE_hostapd-common=y
CONFIG_PACKAGE_wpad-mesh-openssl=y
CONFIG_PACKAGE_iw=y

# --- 5. PVE 虚拟机增强 (含磁盘/网络驱动) ---
CONFIG_PACKAGE_qemu-ga=y
CONFIG_PACKAGE_kmod-virtio-net=y
CONFIG_PACKAGE_kmod-virtio-balloon=y
CONFIG_PACKAGE_kmod-virtio-console=y
CONFIG_PACKAGE_kmod-virtio-scsi=y
CONFIG_PACKAGE_kmod-scsi-core=y

# --- 6. 系统增强与工具 ---
CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_parted=y
CONFIG_PACKAGE_smartmontools=y
CONFIG_PACKAGE_openssh-sftp-server=y
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-app-autocore=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_nano=y
