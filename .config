# --- 目标硬件: X86/64 & 研凌 N3061 (PVE 虚拟机专用) ---
CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y

# --- 核心修复: 开启 EFI 启动模式 (解决你之前的痛点) ---
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_GRUB_IMAGES=y
CONFIG_GRUB_EFI_IMAGES=y
CONFIG_GRUB_TITLE="ImmortalWrt-N3061"
CONFIG_GRUB_TIMEOUT="0"

# --- 存储优化: 扩容分区以容纳 HomeProxy 规则与 Docker ---
CONFIG_TARGET_KERNEL_PARTSIZE=64
CONFIG_TARGET_ROOTFS_PARTSIZE=1024
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_ROOTFS_SQUASHFS=y

# --- 1. 代理软件: HomeProxy (含内核转发补丁) ---
CONFIG_PACKAGE_luci-app-homeproxy=y
CONFIG_PACKAGE_sing-box=y
CONFIG_PACKAGE_kmod-nft-tproxy=y
CONFIG_PACKAGE_kmod-nft-socket=y
CONFIG_PACKAGE_kmod-nft-fullcone=y

# --- 2. 5G 调制解调器: RM500Q & QModem ---
CONFIG_PACKAGE_luci-app-qmodem=y
CONFIG_PACKAGE_luci-app-sms-tool=y
CONFIG_PACKAGE_luci-proto-qmi=y
CONFIG_PACKAGE_uqmi=y
CONFIG_PACKAGE_umbim=y
CONFIG_PACKAGE_comgt=y
CONFIG_PACKAGE_kmod-usb-serial=y
CONFIG_PACKAGE_kmod-usb-serial-option=y
CONFIG_PACKAGE_kmod-usb-serial-wwan=y

# --- 3. 无线驱动: MT7922 & AX210 (含 Wi-Fi 管理组件) ---
# MediaTek MT7922
CONFIG_PACKAGE_kmod-mt7921e=y
CONFIG_PACKAGE_kmod-mt7921-firmware=y
CONFIG_PACKAGE_linux-firmware-mediatek=y
# Intel AX210
CONFIG_PACKAGE_kmod-iwlwifi=y
CONFIG_PACKAGE_iwlwifi-firmware-ax210=y
CONFIG_PACKAGE_iwlwifi-firmware-ty-a0=y
# 无线管理核心 (不选这个界面不显示 Wi-Fi)
CONFIG_PACKAGE_hostapd-common=y
CONFIG_PACKAGE_wpad-mesh-openssl=y
CONFIG_PACKAGE_iw=y

# --- 4. PVE 虚拟机增强 (含磁盘/网络驱动) ---
CONFIG_PACKAGE_qemu-ga=y
CONFIG_PACKAGE_kmod-virtio-net=y
CONFIG_PACKAGE_kmod-virtio-balloon=y
CONFIG_PACKAGE_kmod-virtio-console=y
CONFIG_PACKAGE_kmod-virtio-scsi=y
CONFIG_PACKAGE_kmod-scsi-core=y

# --- 5. 系统增强与常用工具 ---
CONFIG_PACKAGE_luci-app-diskman=y
CONFIG_PACKAGE_parted=y
CONFIG_PACKAGE_smartmontools=y
CONFIG_PACKAGE_openssh-sftp-server=y
CONFIG_PACKAGE_luci-app-ttyd=y
CONFIG_PACKAGE_luci-app-autocore=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y
CONFIG_PACKAGE_nano=y
